{"ast":null,"code":"import _slicedToArray from\"/Users/lauraaupert/Desktop/Dan/OxyMagic/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState,useContext}from'react';import Table from'react-bootstrap/Table';import api from'../../utils/api';import{Form,Col,Row,Button}from'react-bootstrap';import ClientForm from'../ClientForm.js';import{CurrCustContext}from'../../utils/currentCustomerContext';import UpdateModal from'../UpdateModal';function CustomerTable(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),allData=_useState2[0],setAllData=_useState2[1];var _useState3=useState(allData),_useState4=_slicedToArray(_useState3,2),filteredData=_useState4[0],setFilteredData=_useState4[1];var context=useContext(CurrCustContext);var handleSearch=function handleSearch(event){var value=event.target.value;var result=[];console.log(value);result=allData.filter(function(data){return data.firstName.search(value)!==-1;});console.log(result);if(result.length<1){var lastNameResult=[];lastNameResult=allData.filter(function(data){return data.lastName.search(value)!==-1;});result=lastNameResult;}if(result.length<1){var cityResult=[];cityResult=allData.filter(function(data){return data.address.city.search(value)!==-1;});result=cityResult;}if(result.length<1){var zipResult=[];zipResult=allData.filter(function(data){return data.address.zip.toString().search(parseFloat(value))!==-1;});result=zipResult;}if(result.length<1){var idResult=[];idResult=allData.filter(function(data){return data.customerID.toString().search(parseFloat(value))!==-1;});result=idResult;}if(result.length<1){var emailResult=[];emailResult=allData.filter(function(data){return data.email.search(value)!==-1;});result=emailResult;}console.log(result);// }\nsetFilteredData(result);context.setCurrCust(result);};useEffect(function(){console.log();api.getCustomers().then(function(res){console.log(res.data);setAllData(res.data);setFilteredData(res.data);console.log(allData);}).catch(function(error){console.log('Error getting fake data: '+error);});},[]);console.log(allData);console.log(filteredData);function handleClick(e){e.preventDefault();}function onDelete(e){api.deleteProduct();}return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{lg:11},/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formBasicEmail\"},/*#__PURE__*/React.createElement(Form.Control,{type:\"name\",placeholder:\"Search\",onChange:function onChange(event){return handleSearch(event);}// onChange={(e) => setSearch(e.target.value)} value={search} \n}))),/*#__PURE__*/React.createElement(Col,{lg:1},/*#__PURE__*/React.createElement(Button,{variant:\"primary\",type:\"submit\",onClick:handleClick,block:true},\"Search\")))),filteredData.length>0?/*#__PURE__*/React.createElement(Table,{striped:true,bordered:true,hover:true,size:\"sm\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Customer ID\"),/*#__PURE__*/React.createElement(\"th\",null,\"Customer Name\"),/*#__PURE__*/React.createElement(\"th\",null,\"Cell Phone\"),/*#__PURE__*/React.createElement(\"th\",null,\"Home Phone\"),/*#__PURE__*/React.createElement(\"th\",null,\"Email\"),/*#__PURE__*/React.createElement(\"th\",null,\"Address\"),/*#__PURE__*/React.createElement(\"th\",null,\"Jobs\"))),/*#__PURE__*/React.createElement(\"tbody\",null,filteredData.map(function(data){return/*#__PURE__*/ (// (data.group === \"Upholstery\") ?\nReact.createElement(\"tr\",{key:data._id},/*#__PURE__*/React.createElement(\"td\",null,data.customerID),/*#__PURE__*/React.createElement(\"td\",null,data.lastName,\", \",data.firstName),/*#__PURE__*/React.createElement(\"td\",null,data.cellPhone),/*#__PURE__*/React.createElement(\"td\",null,data.homePhone),/*#__PURE__*/React.createElement(\"td\",null,data.email),/*#__PURE__*/React.createElement(\"td\",null,data.address.line1,\", \",data.address.line2,\", \",data.address.city,\", \",data.address.state,\", \",data.address.zip),/*#__PURE__*/React.createElement(\"td\",null,data.jobs),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(UpdateModal,null),/*#__PURE__*/React.createElement(Button,{onClick:onDelete,style:{marginLeft:\"10px\"},size:\"sm\",variant:\"danger\"},\"Delete\")))//   : <tr></tr>\n);}))):/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",null,\"Please register this new customer.\"),/*#__PURE__*/React.createElement(ClientForm,null)));}export default CustomerTable;","map":{"version":3,"sources":["/Users/lauraaupert/Desktop/Dan/OxyMagic/client/src/components/CustomerTable/index.js"],"names":["React","useEffect","useState","useContext","Table","api","Form","Col","Row","Button","ClientForm","CurrCustContext","UpdateModal","CustomerTable","allData","setAllData","filteredData","setFilteredData","context","handleSearch","event","value","target","result","console","log","filter","data","firstName","search","length","lastNameResult","lastName","cityResult","address","city","zipResult","zip","toString","parseFloat","idResult","customerID","emailResult","email","setCurrCust","getCustomers","then","res","catch","error","handleClick","e","preventDefault","onDelete","deleteProduct","map","_id","cellPhone","homePhone","line1","line2","state","jobs","marginLeft"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\nimport Table from 'react-bootstrap/Table'\nimport api from  '../../utils/api'\nimport { Form, Col, Row, Button } from 'react-bootstrap';\nimport ClientForm from '../ClientForm.js';\nimport { CurrCustContext } from '../../utils/currentCustomerContext';\nimport UpdateModal from '../UpdateModal';\n\nfunction CustomerTable() {\n    const [allData,setAllData] = useState([]);\n    const [filteredData,setFilteredData] = useState(allData);\n\n    const context = useContext(CurrCustContext)\n\n    const handleSearch = (event) =>{\n        let value = event.target.value;\n        let result = [];\n        console.log(value)\n        result = allData.filter((data) => {\n          return data.firstName.search(value) !== -1;\n        });\n        console.log(result)\n        if (result.length < 1) {\n          let lastNameResult =[];\n        lastNameResult = allData.filter((data) => {\n          return data.lastName.search(value) !== -1;\n        });\n        result = lastNameResult;\n    }\n        if (result.length < 1) {\n            let cityResult =[];\n          cityResult = allData.filter((data) => {\n            return data.address.city.search(value) !== -1;\n          });\n          result = cityResult;\n  \n    }\n    if (result.length < 1) {\n      let zipResult =[];\n    zipResult = allData.filter((data) => {\n      return data.address.zip.toString().search(parseFloat(value)) !== -1;\n    });\n    result = zipResult;\n\n}\nif (result.length < 1) {\n  let idResult =[];\nidResult = allData.filter((data) => {\n  return data.customerID.toString().search(parseFloat(value)) !== -1;\n});\nresult = idResult;\n\n}\n\nif (result.length < 1) {\n  let emailResult =[];\nemailResult = allData.filter((data) => {\n  return data.email.search(value) !== -1;\n});\nresult = emailResult;\n\n}\n        console.log(result)\n        // }\n        setFilteredData(result);\n        context.setCurrCust(result)\n      }\n    \n    useEffect(() => {\n        console.log()\n        api.getCustomers()\n        .then(res => {\n          console.log(res.data)\n          setAllData(res.data);\n          setFilteredData(res.data);\n\n          console.log(allData)\n        })\n        .catch(error => {\n          console.log('Error getting fake data: ' + error);\n          })\n      \n      }, []);\n      console.log(allData)\n      console.log(filteredData)\n\n  function handleClick(e) {\n    e.preventDefault();\n}\n\n\n      function onDelete(e) {\n        api.deleteProduct()\n    }\n\n\n    return ( \n        <div>\n        <Form>\n<Row>\n<Col lg={11}>\n  <Form.Group controlId=\"formBasicEmail\">\n  \n    \n    <Form.Control type=\"name\" placeholder=\"Search\"\n    onChange={(event) =>handleSearch(event)}\n    // onChange={(e) => setSearch(e.target.value)} value={search} \n    />\n    \n    </Form.Group>\n    </Col>\n  <Col lg={1}>\n  <Button variant=\"primary\" type=\"submit\" onClick={handleClick} block>\n    Search\n  </Button>\n  </Col>\n  </Row>\n</Form>\n\n{filteredData.length > 0 ? \n\n<Table striped bordered hover size=\"sm\">\n  <thead>\n    <tr>\n      <th>Customer ID</th>\n      <th>Customer Name</th>\n      <th>Cell Phone</th>\n      <th>Home Phone</th>\n      <th>Email</th>\n      <th>Address</th>\n      <th>Jobs</th>\n\n    </tr>\n  </thead>\n  <tbody>\n      {filteredData.map((data)=> {\n                    return (\n\n                // (data.group === \"Upholstery\") ?\n\n            <tr key={data._id}>\n            <td>{data.customerID}</td>\n            <td>{data.lastName}, {data.firstName}</td>\n            <td>{data.cellPhone}</td>\n            <td>{data.homePhone}</td>\n            <td>{data.email}</td>\n            <td>{data.address.line1}, {data.address.line2}, {data.address.city}, {data.address.state}, {data.address.zip}</td>\n            <td>{data.jobs}</td>\n\n            <td>\n              {/* <Button size=\"sm\" variant=\"info\">Update</Button> */}\n              <UpdateModal  />\n            <Button onClick={onDelete} style={{marginLeft: \"10px\"}} size=\"sm\" variant=\"danger\">Delete</Button></td>\n          </tr>\n    //   : <tr></tr>\n          ) \n      })}\n\n  </tbody>\n</Table>  \n:\n<div>\n<p>Please register this new customer.</p>\n<ClientForm />\n</div>\n}\n</div>\n    )\n}\n\nexport default CustomerTable;"]},"metadata":{},"sourceType":"module"}